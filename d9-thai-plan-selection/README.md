![Static Badge](https://img.shields.io/badge/InsureMO-777AF2.svg)

![License](https://img.shields.io/github/license/InsureMO/rainbow-d9)
![GitHub Release](https://img.shields.io/github/v/release/InsureMO/rainbow-d9)
![GitHub Release Date](https://img.shields.io/github/release-date/InsureMO/rainbow-d9)
![GitHub last commit (by committer)](https://img.shields.io/github/last-commit/InsureMO/rainbow-d9)

![npm (scoped)](https://img.shields.io/npm/v/%40rainbow-d9/n2?logo=npm)
![npm](https://img.shields.io/npm/dm/%40rainbow-d9/n2)

![Module Formats](https://img.shields.io/badge/module%20formats-cjs%2C%20esm-green.svg)
![Depends](https://img.shields.io/badge/depends-react%2C%20styled--components-087EA4.svg)
![Icons](https://img.shields.io/badge/icons-font--awesome-087EA4.svg)

# d9-thai-plan-selection

Plan selection for Thai Cloud.

| Attribute Name              | Type                                                                                                                                                                                                                                                                                                                       | Description                                                                                                                                                                             |
|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| columns                     | number                                                                                                                                                                                                                                                                                                                     | max plans count in one page, default is 3. set tp <=0 value to represent no limit, which means show horizontal scrollbar and column width and line header width are in pixels (number). |
| columnWidth                 | number, text                                                                                                                                                                                                                                                                                                               | plan column width                                                                                                                                                                       |
| lineHeaderWidth             | number, text                                                                                                                                                                                                                                                                                                               | first column width, default use `columns` and `columnWidth` to compute                                                                                                                  |
| maxHeight                   | number, text                                                                                                                                                                                                                                                                                                               | max body height, plan header and footer are not included                                                                                                                                |
| defs                        | PlanDefs, `() => Promise<PlanDefs>`                                                                                                                                                                                                                                                                                        | plan candidate definitions                                                                                                                                                              |
| currencySymbol              | string, ReactNode                                                                                                                                                                                                                                                                                                          | currency symbol                                                                                                                                                                         |
| premiumDescription          | string, ReactNode                                                                                                                                                                                                                                                                                                          | premium description                                                                                                                                                                     |
| buyText                     | string, ReactNode                                                                                                                                                                                                                                                                                                          | buy button text                                                                                                                                                                         |
| buy                         | ButtonClick                                                                                                                                                                                                                                                                                                                | buy button click handler                                                                                                                                                                |
| planTitle                   | `(def: PlanDef, elementValueChanged: boolean) => Array<NodeDef>`                                                                                                                                                                                                                                                           | plan header title                                                                                                                                                                       |
| planSubTitle                | `(def: PlanDef, elementValueChanged: boolean, currencySymbol?: string \| ReactNode, premiumDescription?: string \| ReactNode) => Array<NodeDef>`                                                                                                                                                                           | plan header subtitle                                                                                                                                                                    |
| elementTitle                | `(def: PlanElementDef, level: number) => Array<NodeDef>`                                                                                                                                                                                                                                                                   | plan element title, level starts from 0                                                                                                                                                 |
| elementFixedValue           | `(options: { elementDef: PlanMutableElementDef; valueDef: PlanElementFixedValueDef; plan: SelectedPlan; $p2r: PropertyPath; element: SelectedPlanElement; values: SelectedPlanElement['values']; elementCodes: Array<PlanElementCode>; }) => Array<NodeDef>`                                                               | plan element fixed value                                                                                                                                                                |
| elementOptionsValue         | `(options: { elementDef: PlanMutableElementDef; valueDef: PlanElementOptionsValueDef; plan: SelectedPlan; $p2r: PropertyPath; element: SelectedPlanElement; values: SelectedPlanElement['values']; elementCodes: Array<PlanElementCode>; onValueChanged: (value: string \| number) => Promise<void>; }) => Array<NodeDef>` | plan element options value                                                                                                                                                              |
| elementNumberValue          | `(options: { elementDef: PlanMutableElementDef; valueDef: PlanElementNumberValueDef; plan: SelectedPlan; $p2r: PropertyPath; element: SelectedPlanElement; values: SelectedPlanElement['values']; elementCodes: Array<PlanElementCode>; onValueChanged: (value: string \| number) => Promise<void>; }) => Array<NodeDef>`  | plan element number value                                                                                                                                                               |
| elementNumberValueValidator | `(options: { elementDef: PlanMutableElementDef; valueDef: PlanElementNumberValueDef; }) => ValidationMonitor['$handle']`                                                                                                                                                                                                   | plan element number value validator                                                                                                                                                     |
| planOperators               | `(def: PlanDef, plan: SelectedPlan) => Array<NodeDef>`                                                                                                                                                                                                                                                                     | plan operators                                                                                                                                                                          |
| calculationDelay            | number                                                                                                                                                                                                                                                                                                                     | default 1s                                                                                                                                                                              |
| calculate                   | `(event: CalculationEvent) => Promise<void>`                                                                                                                                                                                                                                                                               | do calculation                                                                                                                                                                          |

# A sample

```markdown
- PlanSelect::::plans
	- defs: @ext.defs
	- currencySymbol: ฿
	- premiumDescription: After Tax
	- buy: @ext.buy
	- calculationDelay: 3
	- calculate: @ext.calculate
```